
				<html>
					<head>
						<title>Mesen Lua API Reference</title>
						<style>
							* {
								margin: 0;
								font: inherit;
							}

							body {
								font-family: "Calibri", "Segoe UI", "Microsoft Sans Serif", "FreeSans", "DejaVu Sans", "Noto Sans";
								font-size: 17px;
								height: 100%;
							}

							em {
								font-style: italic;
							}

							a {
								text-decoration: none;
								color: #599a3e;
								font-weight: bold;
							}
							
							a:hover {
								color: #3f6d2c;
							}

							strong {
								font-weight: bold;
							}

							h1 {
								font-size: 32px;
								margin-top: 40px;
								margin-bottom: -20px;
							}

							.mainheader {
								font-size: 36px;
								margin-top: 10px;
								margin-bottom: 20px;
							}

							h2 {
								font-size: 26px;
								border-bottom: 1px solid gray;
								margin-top: 20px;
								margin-bottom: 5px;
							}

							h3 {
								font-size: 22px;
								border-bottom: 1px solid gray;
								margin-top: 30px;
								margin-bottom: 5px;
							}

							p {
								margin-top: 10px;
								margin-bottom: 5px;
							}

							.monofont {
								border: 1px solid gray;
								padding: 10px;
								margin-left: 10px;
								background: #F0F0F0;
								font-size: 15px;
								font-family: "Consolas", "Courier New", "FreeMono", "DejaVu Sans Mono", "Noto Sans Mono", "PT Mono";
							}

							.fieldData {
								margin-left: 10px;
							}

							.fieldDesc {
								margin-left: 10px;
								margin-top: 1px;
								margin-bottom: 10px;
							}

							.pageLayout {
								height: 100%;
							}
							
							.menu {
								width: 200px;
								position: fixed;
								padding: 10px;
								height: calc(100vh - 20px);
								overflow: auto;
								font-size: 16px;
							}

							.maincontent {
								overflow: auto;
								padding-left: 230px;
								padding-right: 25px;
								padding-bottom: 25px;
							}

							.category {
								margin-left: 10px;
								margin-bottom: 10px;
							}

							.subcategory {
								margin-left: 10px;
								margin-bottom: 5px;
							}

							.apilink {
								font-size: 14px;
							}

							.apilink > a { 
								color: #07D;
								font-weight: normal;
							}

							.apilink > a:hover { 
								color: #04A;
								font-weight: normal;
							}

							.defaultvalue {
								color: #555;
								font-style: italic;
							}
						</style>
					</head>
				<body>
					<div class="pageLayout">

<div class="menu">
<a href="#Callbacks">Callbacks</a><div class="category">
<div class="apilink"><a href="#addEventCallback">addEventCallback</a></div>
<div class="apilink"><a href="#addMemoryCallback">addMemoryCallback</a></div>
<div class="apilink"><a href="#removeEventCallback">removeEventCallback</a></div>
<div class="apilink"><a href="#removeMemoryCallback">removeMemoryCallback</a></div>
</div>
<a href="#Drawing">Drawing</a><div class="category">
<div class="apilink"><a href="#clearScreen">clearScreen</a></div>
<div class="apilink"><a href="#drawLine">drawLine</a></div>
<div class="apilink"><a href="#drawPixel">drawPixel</a></div>
<div class="apilink"><a href="#drawRectangle">drawRectangle</a></div>
<div class="apilink"><a href="#drawString">drawString</a></div>
<div class="apilink"><a href="#getDrawSurfaceSize">getDrawSurfaceSize</a></div>
<div class="apilink"><a href="#getPixel">getPixel</a></div>
<div class="apilink"><a href="#getScreenBuffer">getScreenBuffer</a></div>
<div class="apilink"><a href="#getScreenSize">getScreenSize</a></div>
<div class="apilink"><a href="#measureString">measureString</a></div>
<div class="apilink"><a href="#selectDrawSurface">selectDrawSurface</a></div>
<div class="apilink"><a href="#setScreenBuffer">setScreenBuffer</a></div>
</div>
<a href="#Emulation">Emulation</a><div class="category">
<div class="apilink"><a href="#breakExecution">breakExecution</a></div>
<div class="apilink"><a href="#getState">getState</a></div>
<div class="apilink"><a href="#reset">reset</a></div>
<div class="apilink"><a href="#resume">resume</a></div>
<div class="apilink"><a href="#rewind">rewind</a></div>
<div class="apilink"><a href="#setState">setState</a></div>
<div class="apilink"><a href="#step">step</a></div>
<div class="apilink"><a href="#stop">stop</a></div>
</div>
<a href="#Input">Input</a><div class="category">
<div class="apilink"><a href="#getInput">getInput</a></div>
<div class="apilink"><a href="#getMouseState">getMouseState</a></div>
<div class="apilink"><a href="#isKeyPressed">isKeyPressed</a></div>
<div class="apilink"><a href="#setInput">setInput</a></div>
</div>
<a href="#Logging">Logging</a><div class="category">
<div class="apilink"><a href="#displayMessage">displayMessage</a></div>
<div class="apilink"><a href="#getLogWindowLog">getLogWindowLog</a></div>
<div class="apilink"><a href="#log">log</a></div>
</div>
<a href="#MemoryAccess">Memory Access</a><div class="category">
<div class="apilink"><a href="#convertAddress">convertAddress</a></div>
<div class="apilink"><a href="#getLabelAddress">getLabelAddress</a></div>
<div class="apilink"><a href="#getMemorySize">getMemorySize</a></div>
<div class="apilink"><a href="#read">read</a></div>
<div class="apilink"><a href="#read16">read16</a></div>
<div class="apilink"><a href="#read32">read32</a></div>
<div class="apilink"><a href="#write">write</a></div>
<div class="apilink"><a href="#write16">write16</a></div>
<div class="apilink"><a href="#write32">write32</a></div>
</div>
<a href="#Miscellaneous">Miscellaneous</a><div class="category">
<a href="#Miscellaneous_AccessCounters">Access Counters</a><div class="subcategory">
<div class="apilink"><a href="#getAccessCounters">getAccessCounters</a></div>
<div class="apilink"><a href="#resetAccessCounters">resetAccessCounters</a></div>
</div>
<a href="#Miscellaneous_Cdl">Code/Data Log</a><div class="subcategory">
<div class="apilink"><a href="#getCdlData">getCdlData</a></div>
</div>
<a href="#Miscellaneous_Cheats">Cheats</a><div class="subcategory">
<div class="apilink"><a href="#addCheat">addCheat</a></div>
<div class="apilink"><a href="#clearCheats">clearCheats</a></div>
</div>
<a href="#Miscellaneous_SaveStates">Save States</a><div class="subcategory">
<div class="apilink"><a href="#createSavestate">createSavestate</a></div>
<div class="apilink"><a href="#loadSavestate">loadSavestate</a></div>
</div>
<a href="#Miscellaneous_Others">Others</a><div class="subcategory">
<div class="apilink"><a href="#getRomInfo">getRomInfo</a></div>
<div class="apilink"><a href="#getScriptDataFolder">getScriptDataFolder</a></div>
<div class="apilink"><a href="#takeScreenshot">takeScreenshot</a></div>
</div>
</div>
<a href="#Enums">Enums</a><div class="category">
<div class="apilink"><a href="#callbackType">callbackType</a></div>
<div class="apilink"><a href="#cheatType">cheatType</a></div>
<div class="apilink"><a href="#counterType">counterType</a></div>
<div class="apilink"><a href="#cpuType">cpuType</a></div>
<div class="apilink"><a href="#drawSurface">drawSurface</a></div>
<div class="apilink"><a href="#eventType">eventType</a></div>
<div class="apilink"><a href="#memType">memType</a></div>
<div class="apilink"><a href="#stepType">stepType</a></div>
</div>
</div>
<div class="maincontent">
<h1 class="mainheader">Mesen Lua API reference</h1>
<p><strong>Important: </strong>This API is similar but not completely compatible with the old Mesen 0.9.x (or Mesen-S) Lua APIs.</p>
<p>Generated on Jul  6 2025, 15:22:42 for Mesen 2.1.1.</p>
<h1 id="Callbacks">Callbacks</h1>
<h3 id="addEventCallback">addEventCallback</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.addEventCallback(callback, eventType)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>callback</strong> - <em>
Function
</em>
<div class="fieldDesc">Lua function to call when the event occurs</div>
</div>
<div class="fieldData"><strong>eventType</strong> - <em>
<a href="#eventType">Enum (eventType)</a>
</em>
<div class="fieldDesc">Event type</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>Int</em> - Value that can be used to remove the callback by calling <a href="#removeEventCallback">emu.removeEventCallback()</a>.
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Registers a callback function to be called whenever the specified event occurs.<br/>The callback function receives 1 parameter ("cpuType") which is an enum value (<a href="#cpuType">emu.cpuType</a>) which indicates which CPU triggered the event (useful to distinguish between identical events triggered by different CPUs, e.g Super Game Boy).</div>
<h3 id="addMemoryCallback">addMemoryCallback</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.addMemoryCallback(callback, callbackType, startAddress, endAddress, cpuType, memoryType)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>callback</strong> - <em>
Function
</em>
<div class="fieldDesc">Lua function to call when the event occurs</div>
</div>
<div class="fieldData"><strong>callbackType</strong> - <em>
<a href="#callbackType">Enum (callbackType)</a>
</em>
<div class="fieldDesc">Callback type</div>
</div>
<div class="fieldData"><strong>startAddress</strong> - <em>
Int
</em>
<div class="fieldDesc">Start of the address range</div>
</div>
<div class="fieldData"><strong>endAddress</strong> - <em>
Int
</em> <span class="defaultvalue">(default: start address)</span>
<div class="fieldDesc">End of the address range</div>
</div>
<div class="fieldData"><strong>cpuType</strong> - <em>
<a href="#cpuType">Enum (cpuType)</a>
</em> <span class="defaultvalue">(default: main CPU)</span>
<div class="fieldDesc">CPU used for the callback</div>
</div>
<div class="fieldData"><strong>memoryType</strong> - <em>
<a href="#memType">Enum (memType)</a>
</em> <span class="defaultvalue">(default: main CPU memory)</span>
<div class="fieldDesc">Memory type for the callback</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>Int</em> - Value that can be used to remove the callback by calling <a href="#removeMemoryCallback">emu.removeMemoryCallback()</a>.
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Registers a callback function to be called whenever the specified event occurs.<br/>The callback function receives 2 parameters ("address" and "value") that correspond to the address being written to or read from, and the value that is being read/written.<br/><br/>For reads, the callback is called after the read is performed.<br/>For writes, the callback is called before the write is performed.<br/><br/>If the callback returns an integer value, it will replace the value - you can alter the results of read/write operation by using this.</div>
<h3 id="removeEventCallback">removeEventCallback</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.removeEventCallback(reference, eventType)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>reference</strong> - <em>
Int
</em>
<div class="fieldDesc">Value returned by the call to <a href="#addEventCallback">emu.addEventCallback()</a></div>
</div>
<div class="fieldData"><strong>eventType</strong> - <em>
<a href="#eventType">Enum (eventType)</a>
</em>
<div class="fieldDesc">Event type</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>&lt;none&gt;</em>
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Removes a previously registered callback function.</div>
<h3 id="removeMemoryCallback">removeMemoryCallback</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.removeMemoryCallback(reference, callbackType, startAddress, endAddress, cpuType, memoryType)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>reference</strong> - <em>
Int
</em>
<div class="fieldDesc">Value returned by the call to <a href="#addMemoryCallback">emu.addMemoryCallback()</a></div>
</div>
<div class="fieldData"><strong>callbackType</strong> - <em>
<a href="#callbackType">Enum (callbackType)</a>
</em>
<div class="fieldDesc">Callback type</div>
</div>
<div class="fieldData"><strong>startAddress</strong> - <em>
Int
</em>
<div class="fieldDesc">Start of the address range</div>
</div>
<div class="fieldData"><strong>endAddress</strong> - <em>
Int
</em> <span class="defaultvalue">(default: start address)</span>
<div class="fieldDesc">End of the address range</div>
</div>
<div class="fieldData"><strong>cpuType</strong> - <em>
<a href="#cpuType">Enum (cpuType)</a>
</em> <span class="defaultvalue">(default: main CPU)</span>
<div class="fieldDesc">CPU used for the callback</div>
</div>
<div class="fieldData"><strong>memoryType</strong> - <em>
<a href="#memType">Enum (memType)</a>
</em> <span class="defaultvalue">(default: main CPU memory)</span>
<div class="fieldDesc">Memory type</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>&lt;none&gt;</em>
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Removes a previously registered callback function.</div>
<h1 id="Drawing">Drawing</h1>

							<h3 id="ColorFormat"><strong>Color format for APIs</strong></h3>
							<p>Colors are integers in ARGB format, but the alpha value is inverted: 0 is opaque, 255 is fully transparent.</p>
							<ul>
								<li>White: 0xFFFFFF</li>
								<li>Black: 0x000000</li>
								<li>Transparent: 0xFF000000</li>
								<li>Semi-transparent black: 0x7F000000</li>
								<li>Red: 0xFF0000</li>
								<li>Green: 0x00FF00</li>
								<li>Blue: 0x0000FF</li>
							</ul>
						
<h3 id="clearScreen">clearScreen</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.clearScreen()</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><em>&lt;none&gt;</em></div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>&lt;none&gt;</em>
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Removes all drawn shapes from the screen.</div>
<h3 id="drawLine">drawLine</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.drawLine(x, y, x2, y2, color, duration, delay)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>x</strong> - <em>
Int
</em>
<div class="fieldDesc">X position (start of line)</div>
</div>
<div class="fieldData"><strong>y</strong> - <em>
Int
</em>
<div class="fieldDesc">Y position (start of line)</div>
</div>
<div class="fieldData"><strong>x2</strong> - <em>
Int
</em>
<div class="fieldDesc">X position (end of line)</div>
</div>
<div class="fieldData"><strong>y2</strong> - <em>
Int
</em>
<div class="fieldDesc">Y position (end of line)</div>
</div>
<div class="fieldData"><strong>color</strong> - <em>
Int (<a href="#ColorFormat">ARGB</a>)
</em> <span class="defaultvalue">(default: 0xFFFFFF (white))</span>
<div class="fieldDesc">Color</div>
</div>
<div class="fieldData"><strong>duration</strong> - <em>
Int
</em> <span class="defaultvalue">(default: 1)</span>
<div class="fieldDesc">Number of frames to display</div>
</div>
<div class="fieldData"><strong>delay</strong> - <em>
Int
</em> <span class="defaultvalue">(default: 0)</span>
<div class="fieldDesc">Number of frames to wait before drawing the line</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>&lt;none&gt;</em>
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Draws a line between (x, y) to (x2, y2) using the specified color for a specific number of frames.</div>
<h3 id="drawPixel">drawPixel</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.drawPixel(x, y, color, duration, delay)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>x</strong> - <em>
Int
</em>
<div class="fieldDesc">X position</div>
</div>
<div class="fieldData"><strong>y</strong> - <em>
Int
</em>
<div class="fieldDesc">Y position</div>
</div>
<div class="fieldData"><strong>color</strong> - <em>
Int (<a href="#ColorFormat">ARGB</a>)
</em>
<div class="fieldDesc">Color</div>
</div>
<div class="fieldData"><strong>duration</strong> - <em>
Int
</em> <span class="defaultvalue">(default: 1)</span>
<div class="fieldDesc">Number of frames to display</div>
</div>
<div class="fieldData"><strong>delay</strong> - <em>
Int
</em> <span class="defaultvalue">(default: 0)</span>
<div class="fieldDesc">Number of frames to wait before drawing the pixel</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>&lt;none&gt;</em>
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Draws a pixel at the specified (x, y) coordinates using the specified color for a specific number of frames.</div>
<h3 id="drawRectangle">drawRectangle</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.drawRectangle(x, y, width, height, color, fill, duration, delay)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>x</strong> - <em>
Int
</em>
<div class="fieldDesc">X position</div>
</div>
<div class="fieldData"><strong>y</strong> - <em>
Int
</em>
<div class="fieldDesc">Y position</div>
</div>
<div class="fieldData"><strong>width</strong> - <em>
Int
</em>
<div class="fieldDesc">Width</div>
</div>
<div class="fieldData"><strong>height</strong> - <em>
Int
</em>
<div class="fieldDesc">Height</div>
</div>
<div class="fieldData"><strong>color</strong> - <em>
Int (<a href="#ColorFormat">ARGB</a>)
</em> <span class="defaultvalue">(default: 0xFFFFFF (white))</span>
<div class="fieldDesc">Color</div>
</div>
<div class="fieldData"><strong>fill</strong> - <em>
Boolean
</em> <span class="defaultvalue">(default: false)</span>
<div class="fieldDesc">Whether or not to draw an outline, or a filled rectangle.</div>
</div>
<div class="fieldData"><strong>duration</strong> - <em>
Int
</em> <span class="defaultvalue">(default: 1)</span>
<div class="fieldDesc">Number of frames to display</div>
</div>
<div class="fieldData"><strong>delay</strong> - <em>
Int
</em> <span class="defaultvalue">(default: 0)</span>
<div class="fieldDesc">Number of frames to wait before drawing the rectangle</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>&lt;none&gt;</em>
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Draws a rectangle between (x, y) to (x+width, y+height) using the specified color for a specific number of frames. If fill is false, only the rectangle's outline will be drawn.</div>
<h3 id="drawString">drawString</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.drawString(x, y, text, textColor, backgroundColor, maxWidth, duration, delay)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>x</strong> - <em>
Int
</em>
<div class="fieldDesc">X position</div>
</div>
<div class="fieldData"><strong>y</strong> - <em>
Int
</em>
<div class="fieldDesc">Y position</div>
</div>
<div class="fieldData"><strong>text</strong> - <em>
String
</em>
<div class="fieldDesc">Text to display</div>
</div>
<div class="fieldData"><strong>textColor</strong> - <em>
Int (<a href="#ColorFormat">ARGB</a>)
</em> <span class="defaultvalue">(default: 0xFFFFFF (white))</span>
<div class="fieldDesc">Color to use for the text</div>
</div>
<div class="fieldData"><strong>backgroundColor</strong> - <em>
Int (<a href="#ColorFormat">ARGB</a>)
</em> <span class="defaultvalue">(default: 0 (black))</span>
<div class="fieldDesc">Color to use for the background</div>
</div>
<div class="fieldData"><strong>maxWidth</strong> - <em>
Int
</em> <span class="defaultvalue">(default: 0)</span>
<div class="fieldDesc">Max width (pixels) - wraps to next line when reached</div>
</div>
<div class="fieldData"><strong>duration</strong> - <em>
Int
</em> <span class="defaultvalue">(default: 1)</span>
<div class="fieldDesc">Number of frames to display</div>
</div>
<div class="fieldData"><strong>delay</strong> - <em>
Int
</em> <span class="defaultvalue">(default: 0)</span>
<div class="fieldDesc">Number of frames to wait before drawing the text</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>&lt;none&gt;</em>
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Draws text at (x, y) using the specified text and colors for a specific number of frames.</div>
<h3 id="getDrawSurfaceSize">getDrawSurfaceSize</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.getDrawSurfaceSize(surface)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>surface</strong> - <em>
<a href="#drawSurface">Enum (drawSurface)</a>
</em> <span class="defaultvalue">(default: current draw surface)</span>
<div class="fieldDesc">Draw surface</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>Table</em> - { width = int, height = int, visibleWidth = int, visibleHeight = int, overscan = { top = int, bottom = int, left = int, right = int } }
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Returns a table containing the full size, visible size and overscan size for the selected draw surface.</div>
<h3 id="getPixel">getPixel</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.getPixel(x, y)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>x</strong> - <em>
Int
</em>
<div class="fieldDesc">X position</div>
</div>
<div class="fieldData"><strong>y</strong> - <em>
Int
</em>
<div class="fieldDesc">Y position</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>Int</em> - <a href="#ColorFormat">ARGB</a> color
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Returns the color (in <a href="#ColorFormat">ARGB</a> format) of the screen's output for the specified coordinates.</div>
<h3 id="getScreenBuffer">getScreenBuffer</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.getScreenBuffer()</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><em>&lt;none&gt;</em></div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>Array</em> - Array of <a href="#ColorFormat">ARGB</a> values
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Returns an array of <a href="#ColorFormat">ARGB</a> values with the contents of the console's screen - can be used with <a href="#setScreenBuffer">emu.setScreenBuffer()</a> to modify the screen's contents.<br/><br/>Note: The size of the array varies based on the console, game, and sometimes scene. Use <a href="#getScreenSize">emu.getScreenSize()</a> to get the screen's current dimensions.</div>
<h3 id="getScreenSize">getScreenSize</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.getScreenSize()</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><em>&lt;none&gt;</em></div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>Table</em> - { width = int, height = int }
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Returns a table containing the size of the console's current screen output.</div>
<h3 id="measureString">measureString</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.measureString(text, maxWidth)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>text</strong> - <em>
String
</em>
<div class="fieldDesc">String to measure</div>
</div>
<div class="fieldData"><strong>maxWidth</strong> - <em>
Int
</em> <span class="defaultvalue">(default: 0)</span>
<div class="fieldDesc">Max width (pixels) - wraps to next line when reached</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>Table</em> - { width = int, height = int }
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Measures the specified string and returns a table containing the width and height that the string would take when drawn.</div>
<h3 id="selectDrawSurface">selectDrawSurface</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.selectDrawSurface(surface, scale)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>surface</strong> - <em>
<a href="#drawSurface">Enum (drawSurface)</a>
</em>
<div class="fieldDesc">Draw surface</div>
</div>
<div class="fieldData"><strong>scale</strong> - <em>
Int
</em> <span class="defaultvalue">(default: current scale)</span>
<div class="fieldDesc">Scale to use for the "scriptHud" surface (max: 4)</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>&lt;none&gt;</em>
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Selects the surface on which any subsequent draw call will be drawn to.<br/><br/>consoleScreen: This surface is the same as the console's output and is a fixed resolution. Anything drawn here will appear in screenshots/videos.<br/><br/>scriptHud: This surface is independent to the console's output and has a configurable resolution. Drawings done on this surface will not appear in screenshots/videos.<br/><br/>Note: setScreenBuffer always draws to the "consoleScreen" surface.</div>
<h3 id="setScreenBuffer">setScreenBuffer</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.setScreenBuffer(screenBuffer)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>screenBuffer</strong> - <em>
Array
</em>
<div class="fieldDesc">Array of integers in <a href="#ColorFormat">ARGB</a> format</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>&lt;none&gt;</em>
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Replaces the current frame with the contents of the specified array.</div>
<h1 id="Emulation">Emulation</h1>
<h3 id="breakExecution">breakExecution</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.breakExecution()</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><em>&lt;none&gt;</em></div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>&lt;none&gt;</em>
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Breaks the execution.</div>
<h3 id="getState">getState</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.getState()</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><em>&lt;none&gt;</em></div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>Table</em> - Content varies for each console and game.
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Returns a table containing key-value pairs that describe the console's current state.<br/><br/>Note: The name of the values returned may change from one version to another. Some values may represent the emulator's internal state and may not be useful (these will be hidden in future versions.)</div>
<h3 id="reset">reset</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.reset()</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><em>&lt;none&gt;</em></div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>&lt;none&gt;</em>
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Resets the current game. If the console does not have a reset button, this will have the same effect as power cycling.</div>
<h3 id="resume">resume</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.resume()</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><em>&lt;none&gt;</em></div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>&lt;none&gt;</em>
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Resumes execution after a break.</div>
<h3 id="rewind">rewind</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.rewind(seconds)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>seconds</strong> - <em>
Int
</em>
<div class="fieldDesc">Number of seconds to rewind</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>&lt;none&gt;</em>
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Instantly rewinds the emulation by the number of seconds specified.<br/><br/>Note: This can only be called from inside an "exec" memory callback.</div>
<h3 id="setState">setState</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.setState(state)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>state</strong> - <em>
Table
</em>
<div class="fieldDesc">A key-value table containing the state to be applied.</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>&lt;none&gt;</em>
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Changes the state of the emulator to match the values provided in the "state" parameter.<br/><br/>Note: The name of the values returned may change from one version to another. Some values may represent the emulator's internal state and should not be changed (access to these will be removed in future versions.)</div>
<h3 id="step">step</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.step(count, stepType, cpuType)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>count</strong> - <em>
Int
</em>
<div class="fieldDesc">Number of cycles/frames/etc.</div>
</div>
<div class="fieldData"><strong>stepType</strong> - <em>
<a href="#stepType">Enum (stepType)</a>
</em>
<div class="fieldDesc">Step type</div>
</div>
<div class="fieldData"><strong>cpuType</strong> - <em>
<a href="#cpuType">Enum (cpuType)</a>
</em> <span class="defaultvalue">(default: main CPU)</span>
<div class="fieldDesc">CPU type</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>&lt;none&gt;</em>
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Breaks the emulation's execution when the step conditions are reached.</div>
<h3 id="stop">stop</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.stop(exitCode)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>exitCode</strong> - <em>
Int
</em>
<div class="fieldDesc">The exit code that the Mesen process will return.</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>&lt;none&gt;</em>
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Stops the emulation and returns the specified exit code (when used with the --testRunner command line option).</div>
<h1 id="Input">Input</h1>
<h3 id="getInput">getInput</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.getInput(port, subPort)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>port</strong> - <em>
Int
</em>
<div class="fieldDesc">Port number</div>
</div>
<div class="fieldData"><strong>subPort</strong> - <em>
Int
</em> <span class="defaultvalue">(default: 0)</span>
<div class="fieldDesc">Subport number - this is used for multitap-like adapters.</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>Table</em> - Content varies based on controller type.
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Returns a table containing the state of all buttons for the selected port/controller. The table's content varies based on the controller type.</div>
<h3 id="getMouseState">getMouseState</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.getMouseState()</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><em>&lt;none&gt;</em></div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>Table</em> - { x = int, y = int, relativeX = int, relativeY = int, left = bool, middle = bool, right = bool }
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Returns a table containing the position and the state of all 3 buttons.</div>
<h3 id="isKeyPressed">isKeyPressed</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.isKeyPressed(keyName)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>keyName</strong> - <em>
String
</em>
<div class="fieldDesc">Name of the key to check</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>Bool</em> - The key's state (true when pressed)
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Returns whether or not a specific key is pressed. The "keyName" must be the same as the string shown in the UI when the key is bound to a button.</div>
<h3 id="setInput">setInput</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.setInput(input, port, subPort)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>input</strong> - <em>
Table
</em>
<div class="fieldDesc">Controller state to apply to the port, same format as the return value of getInput().</div>
</div>
<div class="fieldData"><strong>port</strong> - <em>
Int
</em>
<div class="fieldDesc">Port number</div>
</div>
<div class="fieldData"><strong>subPort</strong> - <em>
Int
</em> <span class="defaultvalue">(default: 0)</span>
<div class="fieldDesc">Subport number - this is used for multitap-like adapters.</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>&lt;none&gt;</em>
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Sets the input state for the specified port. Buttons enabled or disabled via setInput will keep their state until the next inputPolled event.<br/><br/>Note: If a button's value is not specified in the "input" argument, then the player retains control of that button. For example, "<a href="#setInput">emu.setInput</a>({ select = false, start = false }, 0)" will prevent the player 1 from using both the start and select buttons, but all other buttons will still work as normal.<br/><br/>It is recommended to use this function within a callback for the inputPolled event. Otherwise, the inputs may not be applied before the ROM has the chance to read them.</div>
<h1 id="Logging">Logging</h1>
<h3 id="displayMessage">displayMessage</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.displayMessage(category, text)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>category</strong> - <em>
String
</em>
<div class="fieldDesc">The category is the portion shown between brackets</div>
</div>
<div class="fieldData"><strong>text</strong> - <em>
String
</em>
<div class="fieldDesc">Text to show on the screen</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>&lt;none&gt;</em>
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Displays a message on the main window in the format "[category] text"</div>
<h3 id="getLogWindowLog">getLogWindowLog</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.getLogWindowLog()</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><em>&lt;none&gt;</em></div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>String</em> - A string containing the log shown in the log window
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Returns the same text as what is shown in the emulator's log window.</div>
<h3 id="log">log</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.log(text)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>text</strong> - <em>
String
</em>
<div class="fieldDesc">Text to log</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>&lt;none&gt;</em>
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Logs the specified string in the script's log window - useful for debugging scripts.</div>
<h1 id="MemoryAccess">Memory Access</h1>
<h3 id="convertAddress">convertAddress</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.convertAddress(address, memoryType, cpuType)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>address</strong> - <em>
Int
</em>
<div class="fieldDesc">Address to convert</div>
</div>
<div class="fieldData"><strong>memoryType</strong> - <em>
<a href="#memType">Enum (memType)</a>
</em> <span class="defaultvalue">(default: main CPU memory)</span>
<div class="fieldDesc">Memory type</div>
</div>
<div class="fieldData"><strong>cpuType</strong> - <em>
<a href="#cpuType">Enum (cpuType)</a>
</em> <span class="defaultvalue">(default: main CPU)</span>
<div class="fieldDesc">CPU used for the conversion</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>Table</em> - { address = int, memType = enum }
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Converts an address between CPU addressing mode and ROM/RAM addressing mode.<br/>When a ROM/RAM address is given, a CPU address matching that value is returned, if the address is mapped.<br/>When a CPU address is given, the corresponding ROM/RAM address is returned, if the address is mapped to ROM/RAM.</div>
<h3 id="getLabelAddress">getLabelAddress</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.getLabelAddress(label)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>label</strong> - <em>
String
</em>
<div class="fieldDesc">Label</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>Table</em> - { address = int, memType = int }<br/><br/>Note: Returns nil when the specified label could not be found.
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Returns a table containing the address and memory type for the specified label.</div>
<h3 id="getMemorySize">getMemorySize</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.getMemorySize(memoryType)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>memoryType</strong> - <em>
<a href="#memType">Enum (memType)</a>
</em>
<div class="fieldDesc">Memory type</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>Int</em> - Size of the specified memory type
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Returns the size (in bytes) of the specified memory type.</div>
<h3 id="read">read</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.read(address, memoryType, signed)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>address</strong> - <em>
Int
</em>
<div class="fieldDesc">Address to read from</div>
</div>
<div class="fieldData"><strong>memoryType</strong> - <em>
<a href="#memType">Enum (memType)</a>
</em>
<div class="fieldDesc">Memory type to read from</div>
</div>
<div class="fieldData"><strong>signed</strong> - <em>
Bool
</em>
<div class="fieldDesc">When true, the return value is an 8-bit signed value.</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>Int</em> - An 8-bit (signed or unsigned) value.
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Reads an 8-bit value from the specified address and memory type.<br/><br/>Note: When using "memType.[cpuName]" memory types, side-effects can occur from reading a value. Use the "memType.[cpuName]Debug" enum values to avoid side-effects.</div>
<h3 id="read16">read16</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.read16(address, memoryType, signed)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>address</strong> - <em>
Int
</em>
<div class="fieldDesc">Address to read from</div>
</div>
<div class="fieldData"><strong>memoryType</strong> - <em>
<a href="#memType">Enum (memType)</a>
</em>
<div class="fieldDesc">Memory type to read from</div>
</div>
<div class="fieldData"><strong>signed</strong> - <em>
Bool
</em>
<div class="fieldDesc">When true, the return value is a 16-bit signed value.</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>Int</em> - A 16-bit (signed or unsigned) value.
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Reads a 16-bit value from the specified address and memory type.<br/><br/>Note: When using "memType.[cpuName]" memory types, side-effects can occur from reading a value. Use the "memType.[cpuName]Debug" enum values to avoid side-effects.</div>
<h3 id="read32">read32</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.read32(address, memoryType, signed)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>address</strong> - <em>
Int
</em>
<div class="fieldDesc">Address to read from</div>
</div>
<div class="fieldData"><strong>memoryType</strong> - <em>
<a href="#memType">Enum (memType)</a>
</em>
<div class="fieldDesc">Memory type to read from</div>
</div>
<div class="fieldData"><strong>signed</strong> - <em>
Bool
</em>
<div class="fieldDesc">When true, the return value is a 32-bit signed value.</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>Int</em> - A 32-bit (signed or unsigned) value.
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Reads a 32-bit value from the specified address and memory type.<br/><br/>Note: When using "memType.[cpuName]" memory types, side-effects can occur from reading a value. Use the "memType.[cpuName]Debug" enum values to avoid side-effects.</div>
<h3 id="write">write</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.write(address, value, memoryType)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>address</strong> - <em>
Int
</em>
<div class="fieldDesc">Address to write to</div>
</div>
<div class="fieldData"><strong>value</strong> - <em>
Int
</em>
<div class="fieldDesc">8-bit value to write</div>
</div>
<div class="fieldData"><strong>memoryType</strong> - <em>
<a href="#memType">Enum (memType)</a>
</em>
<div class="fieldDesc">Memory type to write to</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>&lt;none&gt;</em>
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Writes an 8-bit value to the specified address and memory type.<br/><br/>Note: When using "memType.[cpuName]" memory types, side-effects can occur from writing a value. Use the "memType.[cpuName]Debug" enum values to avoid side-effects.</div>
<h3 id="write16">write16</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.write16(address, value, memoryType)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>address</strong> - <em>
Int
</em>
<div class="fieldDesc">Address to write to</div>
</div>
<div class="fieldData"><strong>value</strong> - <em>
Int
</em>
<div class="fieldDesc">16-bit value to write</div>
</div>
<div class="fieldData"><strong>memoryType</strong> - <em>
<a href="#memType">Enum (memType)</a>
</em>
<div class="fieldDesc">Memory type to write to</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>&lt;none&gt;</em>
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Writes a 16-bit value to the specified address and memory type.<br/><br/>Note: When using "memType.[cpuName]" memory types, side-effects can occur from writing a value. Use the "memType.[cpuName]Debug" enum values to avoid side-effects.</div>
<h3 id="write32">write32</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.write32(address, value, memoryType)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>address</strong> - <em>
Int
</em>
<div class="fieldDesc">Address to write to</div>
</div>
<div class="fieldData"><strong>value</strong> - <em>
Int
</em>
<div class="fieldDesc">32-bit value to write</div>
</div>
<div class="fieldData"><strong>memoryType</strong> - <em>
<a href="#memType">Enum (memType)</a>
</em>
<div class="fieldDesc">Memory type to write to</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>&lt;none&gt;</em>
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Writes a 32-bit value to the specified address and memory type.<br/><br/>Note: When using "memType.[cpuName]" memory types, side-effects can occur from writing a value. Use the "memType.[cpuName]Debug" enum values to avoid side-effects.</div>
<h1 id="Miscellaneous">Miscellaneous</h1>
<h2 id="Miscellaneous_AccessCounters">Access Counters</h2>
<h3 id="getAccessCounters">getAccessCounters</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.getAccessCounters(counterType, memoryType)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>counterType</strong> - <em>
<a href="#counterType">Enum (counterType)</a>
</em>
<div class="fieldDesc">Counter type</div>
</div>
<div class="fieldData"><strong>memoryType</strong> - <em>
<a href="#memType">Enum (memType)</a>
</em>
<div class="fieldDesc">Memory type</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>Array</em> - Array of ints
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Returns an array of access counters for the specified memory and operation types.</div>
<h3 id="resetAccessCounters">resetAccessCounters</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.resetAccessCounters()</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><em>&lt;none&gt;</em></div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>&lt;none&gt;</em>
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Resets all access counters.</div>
<h2 id="Miscellaneous_Cdl">Code/Data Log</h2>
<h3 id="getCdlData">getCdlData</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.getCdlData(memoryType)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>memoryType</strong> - <em>
<a href="#memType">Enum (memType)</a>
</em>
<div class="fieldDesc">Memory type</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>Array</em> - Array of bytes
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Returns the current state of the CDL (code/data log) for the specified memory type. This can only be used for (some) ROM memory types.</div>
<h2 id="Miscellaneous_Cheats">Cheats</h2>
<h3 id="addCheat">addCheat</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.addCheat(cheatType, cheatCode)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>cheatType</strong> - <em>
<a href="#cheatType">Enum (cheatType)</a>
</em>
<div class="fieldDesc">Cheat type/format</div>
</div>
<div class="fieldData"><strong>cheatCode</strong> - <em>
String
</em>
<div class="fieldDesc">Cheat code</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>&lt;none&gt;</em>
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Adds the specified cheat code.<br/><br/>Note: Cheat codes added via this function are not permanent and not visible in the UI.</div>
<h3 id="clearCheats">clearCheats</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.clearCheats()</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><em>&lt;none&gt;</em></div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>&lt;none&gt;</em>
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Removes all active cheat codes.<br/><br/>Note: This has no impact on cheat codes saved in the UI, but it will disable them temporarily.</div>
<h2 id="Miscellaneous_SaveStates">Save States</h2>
<h3 id="createSavestate">createSavestate</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.createSavestate()</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><em>&lt;none&gt;</em></div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>String</em> - Binary string containing the savestate.
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Creates a savestate and returns it as a binary string.<br/><br/>Note: This can only be called from inside an "exec" memory callback.</div>
<h3 id="loadSavestate">loadSavestate</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.loadSavestate(state)</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><strong>state</strong> - <em>
String
</em>
<div class="fieldDesc">Binary data containing the savestate</div>
</div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>&lt;none&gt;</em>
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Loads a savestate from a binary string.<br/><br/>Note: This can only be called from inside an "exec" memory callback.</div>
<h2 id="Miscellaneous_Others">Others</h2>
<h3 id="getRomInfo">getRomInfo</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.getRomInfo()</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><em>&lt;none&gt;</em></div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>Table</em> - { name = string, path = string, fileSha1Hash = string }
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Returns information about the ROM file that is currently running.</div>
<h3 id="getScriptDataFolder">getScriptDataFolder</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.getScriptDataFolder()</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><em>&lt;none&gt;</em></div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>String</em> - The folder's path
</div>
<p><strong>Description</strong></p>
<div class="fieldData">This function returns the path to a unique folder (based on the script's filename) where the script should store its data (if any data needs to be saved). The data will be saved in subfolders inside the LuaScriptData folder in Mesen's home folder.<br/><br/>Note: This function will return an empty string if the "Allow access to I/O and OS functions" option is disabled.</div>
<h3 id="takeScreenshot">takeScreenshot</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.takeScreenshot()</div>
<p><strong>Parameters</strong></p>
<div class="fieldData"><em>&lt;none&gt;</em></div>
<p><strong>Return value</strong></p>
<div class="fieldData">
<em>String</em> - A binary string containing a PNG image.
</div>
<p><strong>Description</strong></p>
<div class="fieldData">Takes a screenshot and returns a PNG file as a string. The screenshot is not saved to the disk.</div>
<h1 id="Enums">Enums</h1>
<h3 id="callbackType">callbackType</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.callbackType.[value]</div>
<p><strong>Description</strong></p>
<div class="fieldData">Used by <a href="#addMemoryCallback">emu.addMemoryCallback()</a> and <a href="#removeMemoryCallback">emu.removeMemoryCallback()</a></div>
<p><strong>Values</strong></p>
<div class="monofont">
<div>read - Callback is called when data is read</div>
<div>write - Callback is called when data is written</div>
<div>exec - Callback is called when the CPU starts executing an instruction</div>
</div>
<h3 id="cheatType">cheatType</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.cheatType.[value]</div>
<p><strong>Description</strong></p>
<div class="fieldData">Used by <a href="#addCheat">emu.addCheat()</a></div>
<p><strong>Values</strong></p>
<div class="monofont">
<div>nesGameGenie - Game Genie (NES)</div>
<div>nesProActionRocky - Pro Action Rocky (NES)</div>
<div>nesCustom - Custom Address:Value code (NES)</div>
<div>gbGameGenie - Game Genie (GB)</div>
<div>gbGameShark - Game Shark (GB)</div>
<div>snesGameGenie - Game Genie (SNES)</div>
<div>snesProActionReplay - Pro Action Replay (SNES)</div>
<div>pceRaw - 24-bit address format (PC Engine)</div>
<div>pceAddress - 21-bit address format (PC Engine)</div>
<div>smsProActionReplay - Pro Action Replay (SMS)</div>
<div>smsGameGenie - Game Genie (SMS)</div>
</div>
<h3 id="counterType">counterType</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.counterType.[value]</div>
<p><strong>Description</strong></p>
<div class="fieldData">Used by <a href="#getAccessCounters">emu.getAccessCounters()</a></div>
<p><strong>Values</strong></p>
<div class="monofont">
<div>readCount - Returns the number of times each byte was read</div>
<div>writeCount - Returns the number of times each byte was written</div>
<div>execCount - Returns the number of times each byte was executed</div>
<div>lastReadClock - Returns the time at which each byte was last read</div>
<div>lastWriteClock - Returns the time at which each byte was last written</div>
<div>lastExecClock - Returns the time at which each byte was last executed</div>
</div>
<h3 id="cpuType">cpuType</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.cpuType.[value]</div>
<p><strong>Description</strong></p>
<div class="fieldData">Used by several APIs to specify which CPU the API call applies to.</div>
<p><strong>Values</strong></p>
<div class="monofont">
<div>snes - SNES - Main CPU - S-CPU 5A22 (65816)</div>
<div>spc - SNES - SPC</div>
<div>necDsp - SNES - DSP-n</div>
<div>sa1 - SNES - SA-1</div>
<div>cx4 - SNES - CX4</div>
<div>st018 - SNES - ST018</div>
<div>gameboy - Game Boy - Main CPU (can also be used in SGB mode)</div>
<div>nes - NES - Main CPU - 2A03 (6502)</div>
<div>pce - PC Engine - Main CPU - HuC6280</div>
<div>sms - SMS - Main CPU - Z80</div>
<div>gba - GBA - Main CPU - ARM7TDMI</div>
<div>ws - WS - Main CPU - NEC V30MZ</div>
</div>
<h3 id="drawSurface">drawSurface</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.drawSurface.[value]</div>
<p><strong>Description</strong></p>
<div class="fieldData">Used by <a href="#selectDrawSurface">emu.selectDrawSurface()</a> and <a href="#getDrawSurfaceSize">emu.getDrawSurfaceSize()</a></div>
<p><strong>Values</strong></p>
<div class="monofont">
<div>consoleScreen - Console's framebuffer. Drawings appear in screenshots/videos.</div>
<div>scriptHud - Separate surface with a configurable resolution. Drawings not shown in screenshots/videos.</div>
</div>
<h3 id="eventType">eventType</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.eventType.[value]</div>
<p><strong>Description</strong></p>
<div class="fieldData">Used by <a href="#addEventCallback">emu.addEventCallback()</a> and <a href="#removeEventCallback">emu.removeEventCallback()</a></div>
<p><strong>Values</strong></p>
<div class="monofont">
<div>nmi - Triggered when an NMI occurs (not available on some consoles)</div>
<div>irq - Triggered when an IRQ occurs</div>
<div>startFrame - Triggered when a frame starts (typically once vertical blank ends)</div>
<div>endFrame - Triggered when a frame ends (typically once vertical blank starts)</div>
<div>reset - Triggered when the console is reset (not available on some consoles)</div>
<div>scriptEnded - Triggered when the Lua script is stopped</div>
<div>inputPolled - Triggered after the emulator updates the state of all input devices (once per frame)</div>
<div>stateLoaded - Triggered when a savestate is manually loaded</div>
<div>stateSaved - Triggered when a savestate is manually saved</div>
<div>codeBreak - Triggered when code execution breaks (e.g breakpoint, step, etc.)</div>
</div>
<h3 id="memType">memType</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.memType.[value]</div>
<p><strong>Description</strong></p>
<div class="fieldData">Used by several APIs to specify which memory type to access/use.</div>
<p><strong>Values</strong></p>
<div class="monofont">
<div>snesMemory - SNES - S-CPU memory</div>
<div>spcMemory - SNES - SPC memory</div>
<div>sa1Memory - SNES - SA-1 memory</div>
<div>necDspMemory - SNES - DSP-n memory</div>
<div>gsuMemory - SNES - GSU memory</div>
<div>cx4Memory - SNES - CX4 memory</div>
<div>st018Memory - SNES - ST018 memory</div>
<div>gameboyMemory - Game Boy - CPU memory</div>
<div>nesMemory - NES - CPU memory</div>
<div>nesPpuMemory - NES - PPU memory</div>
<div>pceMemory - PC Engine - CPU memory</div>
<div>smsMemory - SMS - CPU memory</div>
<div>gbaMemory - GBA - CPU memory</div>
<div>wsMemory - WS - CPU memory</div>
<div>snesDebug - SNES - S-CPU memory (no read/write side-effects)</div>
<div>spcDebug - SNES - SPC memory (no read/write side-effects)</div>
<div>sa1Debug - SNES - SA-1 memory (no read/write side-effects)</div>
<div>necDspDebug - SNES - DSP-n memory (no read/write side-effects)</div>
<div>gsuDebug - SNES - GSU memory (no read/write side-effects)</div>
<div>cx4Debug - SNES - CX4 memory (no read/write side-effects)</div>
<div>st018MemoryDebug - SNES - ST018 memory (no read/write side-effects)</div>
<div>gameboyDebug - Game Boy - CPU memory (no read/write side-effects)</div>
<div>nesDebug - NES - CPU memory (no read/write side-effects)</div>
<div>nesPpuDebug - NES - PPU memory (no read/write side-effects)</div>
<div>pceDebug - PC Engine - CPU memory (no read/write side-effects)</div>
<div>smsDebug - SMS - CPU memory (no read/write side-effects)</div>
<div>gbaDebug - GBA - CPU memory (no read/write side-effects)</div>
<div>wsDebug - WS - CPU memory (no read/write side-effects)</div>
<div>snesPrgRom - SNES - PRG ROM</div>
<div>snesWorkRam - SNES - Work RAM</div>
<div>snesSaveRam - SNES - Save RAM</div>
<div>snesVideoRam - SNES - Video RAM</div>
<div>snesSpriteRam - SNES - Sprite RAM (OAM)</div>
<div>snesCgRam - SNES - Palette RAM (CGRAM)</div>
<div>spcRam - SNES - SPC - RAM</div>
<div>spcRom - SNES - SPC - IPL ROM</div>
<div>dspProgramRom - SNES - DSP-n - Program ROM</div>
<div>dspDataRom - SNES - DSP-n - Data ROM</div>
<div>dspDataRam - SNES - DSP-n - Data RAM</div>
<div>sa1InternalRam - SNES - SA-1 - IRAM</div>
<div>gsuWorkRam - SNES - GSU - Work RAM</div>
<div>cx4DataRam - SNES - CX4 - Data RAM</div>
<div>bsxPsRam - SNES - BS-X - PSRAM</div>
<div>bsxMemoryPack - SNES - BS-X - Memory Pack</div>
<div>st018PrgRom - SNES - ST018 - PRG ROM</div>
<div>st018DataRom - SNES - ST018 - Data ROM</div>
<div>st018WorkRam - SNES - ST018 - Work RAM</div>
<div>sufamiTurboFirmware - SNES - Sufami Turbo - Firmware ROM</div>
<div>sufamiTurboSecondCart - SNES - Sufami Turbo - Slot B - ROM</div>
<div>sufamiTurboSecondCartRam - SNES - Sufami Turbo - Slot B - RAM</div>
<div>gbPrgRom - Game Boy - PRG ROM</div>
<div>gbWorkRam - Game Boy - Work RAM</div>
<div>gbCartRam - Game Boy - Cart/Save RAM</div>
<div>gbHighRam - Game Boy - High RAM</div>
<div>gbBootRom - Game Boy - Boot ROM</div>
<div>gbVideoRam - Game Boy - Video RAM</div>
<div>gbSpriteRam - Game Boy - Sprite RAM</div>
<div>nesPrgRom - NES - PRG ROM</div>
<div>nesInternalRam - NES - System RAM</div>
<div>nesWorkRam - NES - Work RAM</div>
<div>nesSaveRam - NES - Save RAM</div>
<div>nesNametableRam - NES - Nametable RAM (CIRAM)</div>
<div>nesMapperRam - NES - Mapper RAM (EXRAM)</div>
<div>nesSpriteRam - NES - Sprite RAM (OAM)</div>
<div>nesSecondarySpriteRam - NES - Secondary Sprite RAM</div>
<div>nesPaletteRam - NES - Palette RAM</div>
<div>nesChrRam - NES - CHR RAM</div>
<div>nesChrRom - NES - CHR ROM</div>
<div>pcePrgRom - PC Engine - HuCard ROM</div>
<div>pceWorkRam - PC Engine - Work RAM</div>
<div>pceSaveRam - PC Engine - Save RAM</div>
<div>pceCdromRam - PC Engine - CD-ROM Unit RAM</div>
<div>pceCardRam - PC Engine - Card RAM</div>
<div>pceAdpcmRam - PC Engine - ADPCM RAM</div>
<div>pceArcadeCardRam - PC Engine - Arcade Card RAM</div>
<div>pceVideoRam - PC Engine - Video RAM (VDC)</div>
<div>pceVideoRamVdc2 - PC Engine - Video RAM (VDC2 - SuperGrafx only)</div>
<div>pceSpriteRam - PC Engine - Sprite RAM (VDC)</div>
<div>pceSpriteRamVdc2 - PC Engine - Sprite RAM (VDC2 - SuperGrafx only)</div>
<div>pcePaletteRam - PC Engine - Palette RAM (VCE)</div>
<div>smsPrgRom - SMS - ROM</div>
<div>smsWorkRam - SMS - System RAM</div>
<div>smsCartRam - SMS - Cart RAM</div>
<div>smsBootRom - SMS - BIOS ROM</div>
<div>smsVideoRam - SMS - Video RAM</div>
<div>smsPaletteRam - SMS - Palette RAM</div>
<div>smsPort - SMS - I/O Port</div>
<div>gbaPrgRom - GBA - ROM</div>
<div>gbaIntWorkRam - GBA - Internal Work RAM</div>
<div>gbaExtWorkRam - GBA - External Work RAM</div>
<div>gbaSaveRam - GBA - Save RAM/Flash/EEPROM</div>
<div>gbaBootRom - GBA - BIOS ROM</div>
<div>gbaVideoRam - GBA - Video RAM</div>
<div>gbaSpriteRam - GBA - Sprite RAM</div>
<div>gbaPaletteRam - GBA - Palette RAM</div>
<div>wsPrgRom - WS - ROM</div>
<div>wsWorkRam - WS - Work RAM</div>
<div>wsCartRam - WS - Save RAM</div>
<div>wsCartEeprom - WS - Cart EEPROM</div>
<div>wsBootRom - WS - Boot ROM</div>
<div>wsInternalEeprom - WS - Internal EEPROM</div>
<div>wsPort - WS - I/O Port</div>
</div>
<h3 id="stepType">stepType</h3>
<p><strong>Syntax</strong></p>
<div class="monofont">emu.stepType.[value]</div>
<p><strong>Description</strong></p>
<div class="fieldData">Used by <a href="#step">emu.step()</a></div>
<p><strong>Values</strong></p>
<div class="monofont">
<div>step - Steps the specified number of instructions</div>
<div>stepOut - Steps out of the current subroutine (not available for all CPUs)</div>
<div>stepOver - Steps over the current subroutine call (not available for all CPUs)</div>
<div>cpuCycleStep - Steps the specified number of CPU cycles (not available for all CPUs)</div>
<div>ppuStep - Steps the specified number of scanline cycles</div>
<div>ppuScanline - Steps the specified number of scanlines</div>
<div>ppuFrame - Steps the specified number of video frames</div>
<div>specificScanline - Breaks on the specified scanline number</div>
<div>runToNmi - Breaks on the next NMI event</div>
<div>runToIrq - Breaks on the next IRQ event</div>
</div>
</div>
</body></html>
